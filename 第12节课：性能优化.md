# 性能优化

**指标**

**场景**

**维度**

**成本**

软件开发中的决策，是一个trade off 的问题。

### 一 先看看有哪些性能的指标

- 常规指标

  - **FP -first print ： 首次绘制时间** 第一个像素点描绘到屏幕的时刻。对应到页面，用户再视觉上，首次看到不同于跳转之前的内容 时间点，或者说是页面第一次发生绘制的时间点。

  - **FCP - first contented print : 首次有内容绘制时间** 指浏览器完成渲染 DOM 中第一个内容 的时间点。可能是文本，图像，SVG或者其他的任何元素，此时用户应该在视觉上有直观的感受。

  - **FMP - first meaning print: 首次有意义绘制时间** 指页面关键元素的渲染时间。这个概念并没有标准化定义， 因为关键元素可由开发者自定义。

  - **TTI - Time To Interactive ： 用户可交互时间**  一般来讲，认为是 Dom Ready的时间，因为我们通常在这个时候绑定事件操作，如果页面中设计交互的脚本没有下载完成，那么当然没有到达所谓的用户可交互时间。  **那么如何定义 DOM Ready 时间 呢**

  - **TTFB - Time for first byte ： 网络请求耗时**

    TTFB 是发出页面请求，到接收到应答数据第一个字节所花费的毫秒数。

  - **DCL - DomContentLoaded**

  - **L: Dom onload**

  - **总下载时间**

    页面所有资源加载完成所需要的时间。一般可以统计 window.onload 时间， 这样可以统计出同步加载的资源全部加载完成的耗时。如果页面中存在较多的异步渲染，也可以将异步渲染的全部完成时间作为总下载的时间。

#### DomContentLoaded 与 load 时间的区别

DomContentLoaded 只是DOM 内容加载完毕，html结构已完整。但是页面包含的图片视频音频等其他由网络获取的资源还没有请求或者渲染完成。**而当页面中所有的资源都有加载完成之后，load事件才会被触发**。因此在时间线上，load时间往往会落后于DomContentLoaded时间

#### 关于 DomContentLoaded 与 Dom Ready   ?

我们简单说一下，浏览器是从上到下，从左到右，一个个字符串读入的，大致可认为两个同名的开闭标签就是一个DOM， 这时就忽略掉它的两个标签间的内容。

页面上有许多的标签，但标签会生成同样多的 DOM ，因为有的标签下只允许存在特定的子标签，比如 tr下面一定是td th ，select下面一定是 opgroup ,option, 而 option 下面，就算你写了<span></span>>,它都会忽略掉。option下面只存在文本，这就是我们要自定义下拉框的缘故。

我们说过这顺序是上到下，有的元素简单，会构建的快，但是标签内存在src href 属性，它会引用外部资源，这就要区别对待了。**比如说** ， **script标签，，它一定会等src 指定的脚本文件加载下来，然后全部执行了里面的脚本，才会分析下一个标签。这种现象叫做堵塞**

堵塞是一种非常致命的现象，因为浏览器渲染引擎是单线程的，如果头部脚本过多过大会导致白屏。影响用户体验，因此将所有的script标签放到body后面。

**此外，**style标签，与link标签，它们在加载样式文件时是不会堵塞，但它们一旦异步加载好，就会立即开始渲染已经构建好的节点元素们，这可能会引起**reflow**，这也会影响速度





### 说一说你理解的性能优化







### 说一说 react 项目如何进行性能优化

### 你在项目实施过程中，是如何考虑性能的

### 为啥 VUE 比 react 性能好

抛开指标和场景去谈性能是毫无意义的。

### 为啥 VDOM 快

VDOM 一定快吗，需要看什么场景下快。

